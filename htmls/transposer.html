<!DOCTYPE html>
<html lang="en">
<br>
<input type="button" id="TransposeButton" style="background:#66BB55;color:white;" onclick="transposeChords()" value="Transpose"/>
<input type="button" id="ScrollText" style="background:#0000FF;color:white;" onclick="ScrollTextArea()" value="Scroll"/>
<input type="button" id="PrintText" style="background:#FF0000;color:white;" onclick="printTextArea()" value="Print"/>
<br>
<br>
	 <script type="text/javascript">

		const chords_major = ["A ", "A# ", "B ", "C ", "C# ", "D ", "D# ", "E ", "F ", "F# ", "G ", "G# "];
		const chords_major_no_space = ["A", "A#", "B", "C", "C#", "D", "D#", "E", "F", "F#", "G", "G#"];

		const chords_minor = ["Am ", "A#m ", "Bm ", "Cm ", "C#m ", "Dm ", "D#m ", "Em ", "Fm ", "F#m ", "Gm ", "G#m "];
		const chords_minor_no_space = ["Am", "A#m", "Bm", "Cm", "C#m", "Dm", "D#m", "Em", "Fm", "F#m", "Gm", "G#m"];

		// TransposeUp
		function transposeUp(inputText){
			var inputTextCpy = inputText;

			// Add space after \n
			inputTextCpy = inputTextCpy.replaceAll("\n"," \n");

                        for(let i =0; i<chords_major.length; i++)
			{
     				inputTextCpy = inputTextCpy.replaceAll(chords_major[i], chords_major_no_space[(i+1)%chords_major_no_space.length]+"@@");
			}

			for(let i =0; i<chords_minor.length; i++)
			{
     				inputTextCpy = inputTextCpy.replaceAll(chords_minor[i], chords_minor_no_space[(i+1)%chords_minor_no_space.length]+"@@");
			}

			inputTextCpy = inputTextCpy.replaceAll("@@", " ");
			inputTextCpy = inputTextCpy.replaceAll(" \n","\n");

		        return inputTextCpy;
		}

		// Update Text
		function transposeChords() {
			var inputTextAreaElement = document.getElementById("inputTextArea");

			var t = inputTextAreaElement.value;

                        t = transposeUp(t);

			inputTextAreaElement.value = t;			
		}

		// Replace Cm with Dm
		function transposeCm() {
		
			var inputTextAreaElement = document.getElementById("inputTextArea");
			
			// Method 1: Start
			var t = inputTextAreaElement.value.replaceAll('Cm', 'Dm');
			inputTextAreaElement.value = t;
			// Method 1: End
			
			// Method 2: Start
            //var x = document.createElement("TEXTAREA");
			//x.cols = 100;
			//x.rows = 200;			
			//var tUpdated = inputTextAreaElement.value.replaceAll('cm', 'dm');
			//var t = document.createTextNode(tUpdated);			
			//x.appendChild(t);
			//document.body.appendChild(x);
			//inputTextAreaElement.remove();
			// Method 2: End			
		}
	  
	  
		// Scroll
		var fullWindowHeight = window.innerHeight;
		var step = 0.2;
		var btn = document.getElementById('ScrollText');
		btn.addEventListener("click", function() {
		var i = step;
		var int = setInterval(function() {
					window.scrollTo(0, i);
					i += step; if(i>=20000) clearInterval(int);
					}, step);
					
					window.addEventListener("resize", function() {
						clearInterval(int);
				})  
		})

		// Print
		function printTextArea() {
		        childWindow = window.open('','childWindow','location=yes, menubar=yes, toolbar=yes');
		        childWindow.document.open();
		        childWindow.document.write('<html><head></head><body>');
		        childWindow.document.write(document.getElementById("inputTextArea").value.replace(/\n/gi,'<br>'));
		        childWindow.document.write('</body></html>');
		        childWindow.print();
		        childWindow.document.close();
		        childWindow.close();
		      }
		
    </script>
  <body>
    <textarea id="inputTextArea" name="inputText" rows="200" cols="100"></textarea>
    <!--<textarea name="text" id="inputTextArea" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'></textarea>-->
  </body>
</html>
